(global.webpackChunkpadbol_scoreboard=global.webpackChunkpadbol_scoreboard||[]).push([[461],{1461:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ScoreboardsModule:()=>Y});var a=n(1116),o=n(2797),i=n(7307),r=n(400),s=n(9199),c=n(4369),u=n(994),l=n(7112),d=n(8150),p=n(3070),g=n(7173),f=n(2309),_=n(9550),b=n(4719),h=n(8288),m=n(7285),Z=n(6797),U=n(1708),x=n(2593),T=n(6055),A=n(5959),w=n(6673),v=n(8318),y=n(7570),q=n(6994),k={url:"",deserializer:function(t){return JSON.parse(t.data)},serializer:function(t){return JSON.stringify(t)}},O=function(t){(0,x.Z)(n,t);var e=(0,T.Z)(n);function n(t,a){var o;if((0,h.Z)(this,n),o=e.call(this),t instanceof v.y)o.destination=a,o.source=t;else{var i=o._config=Object.assign({},k);if(o._output=new A.xQ,"string"==typeof t)i.url=t;else for(var r in t)t.hasOwnProperty(r)&&(i[r]=t[r]);if(!i.WebSocketCtor&&WebSocket)i.WebSocketCtor=WebSocket;else if(!i.WebSocketCtor)throw new Error("no WebSocket constructor can be found");o.destination=new q.t}return o}return(0,m.Z)(n,[{key:"lift",value:function(t){var e=new n(this._config,this.destination);return e.operator=t,e.source=this,e}},{key:"_resetState",value:function(){this._socket=null,this.source||(this.destination=new q.t),this._output=new A.xQ}},{key:"multiplex",value:function(t,e,n){var a=this;return new v.y(function(o){try{a.next(t())}catch(r){o.error(r)}var i=a.subscribe(function(t){try{n(t)&&o.next(t)}catch(r){o.error(r)}},function(t){return o.error(t)},function(){return o.complete()});return function(){try{a.next(e())}catch(r){o.error(r)}i.unsubscribe()}})}},{key:"_connectSocket",value:function(){var t=this,e=this._config,n=e.WebSocketCtor,a=e.protocol,o=e.url,i=e.binaryType,r=this._output,s=null;try{s=a?new n(o,a):new n(o),this._socket=s,i&&(this._socket.binaryType=i)}catch(u){return void r.error(u)}var c=new y.w(function(){t._socket=null,s&&1===s.readyState&&s.close()});s.onopen=function(e){if(!t._socket)return s.close(),void t._resetState();var n=t._config.openObserver;n&&n.next(e);var a=t.destination;t.destination=w.L.create(function(n){if(1===s.readyState)try{s.send((0,t._config.serializer)(n))}catch(e){t.destination.error(e)}},function(e){var n=t._config.closingObserver;n&&n.next(void 0),e&&e.code?s.close(e.code,e.reason):r.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),t._resetState()},function(){var e=t._config.closingObserver;e&&e.next(void 0),s.close(),t._resetState()}),a&&a instanceof q.t&&c.add(a.subscribe(t.destination))},s.onerror=function(e){t._resetState(),r.error(e)},s.onclose=function(e){t._resetState();var n=t._config.closeObserver;n&&n.next(e),e.wasClean?r.complete():r.error(e)},s.onmessage=function(e){try{r.next((0,t._config.deserializer)(e))}catch(n){r.error(n)}}}},{key:"_subscribe",value:function(t){var e=this,n=this.source;return n?n.subscribe(t):(this._socket||this._connectSocket(),this._output.subscribe(t),t.add(function(){var t=e._socket;0===e._output.observers.length&&(t&&1===t.readyState&&t.close(),e._resetState())}),t)}},{key:"unsubscribe",value:function(){var t=this._socket;t&&1===t.readyState&&t.close(),this._resetState(),(0,Z.Z)((0,U.Z)(n.prototype),"unsubscribe",this).call(this)}}]),n}(A.ug),C=n(2693),S=n(529),M=n(7219),P=function(){function t(t){this.http=t}return t.prototype.connect=function(){this.socket$&&!this.socket$.closed||(this.socket$=this.getNewWebSocket())},t.prototype.getNewWebSocket=function(){return new O(S.q.WEBSOCKET_URL)},t.prototype.sendMessage=function(t){this.socket$.next(t)},t.prototype.receiveMessage=function(){return this.socket$.asObservable()},t.prototype.close=function(){this.socket$.complete()},t.prototype.getMatch=function(t,e){var n=S.q.GATEWAY_URL+"/api/match/get",a=new C.WM({"Content-Type":"application/x-www-form-urlencoded"}),o=(new C.LE).set("tenant",t).set("field",e);return this.http.post(n,o,{headers:a})},t.prototype.addPointTeam=function(t,e,n){var a=S.q.GATEWAY_URL+"/api/match/add_point_team",o=new C.WM({"Content-Type":"application/x-www-form-urlencoded"}),i=(new C.LE).set("tenant",t).set("field",e).set("team",n);return this.http.post(a,i,{headers:o})},t.prototype.subPointTeam=function(t,e){var n=S.q.GATEWAY_URL+"/api/match/sub_point_team",a=new C.WM({"Content-Type":"application/x-www-form-urlencoded"}),o=(new C.LE).set("tenant",t).set("field",e);return this.http.post(n,o,{headers:a})},t.prototype.stop=function(t,e){var n=S.q.GATEWAY_URL+"/api/match/stop",a=new C.WM({"Content-Type":"application/x-www-form-urlencoded"}),o=(new C.LE).set("tenant",t).set("field",e);return this.http.post(n,o,{headers:a})},t.\u0275fac=function(e){return new(e||t)(M.LFG(C.eN))},t.\u0275prov=M.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),L=n(649),W=n(3337),J=n(9697),E=n(4155);function H(t,e){1&t&&(M.TgZ(0,"mat-grid-list",2),M._uU(1,"\n  "),M.TgZ(2,"mat-grid-tile"),M._uU(3,"\n    "),M.TgZ(4,"h2"),M._uU(5),M.ALo(6,"translate"),M.qZA(),M._uU(7,"\n  "),M.qZA(),M._uU(8,"\n"),M.qZA()),2&t&&(M.xp6(5),M.Oqu(M.lcZ(6,1,"pages.scoreboards.no_match_in_progress")))}function z(t,e){if(1&t){var n=M.EpF();M.TgZ(0,"mat-grid-list",3),M._uU(1,"\n  "),M._uU(2,"\n  "),M.TgZ(3,"mat-grid-tile"),M._uU(4,"\n    "),M.TgZ(5,"h2"),M._uU(6),M.ALo(7,"translate"),M.qZA(),M._uU(8,"\n  "),M.qZA(),M._uU(9,"\n  "),M.TgZ(10,"mat-grid-tile"),M._uU(11,"\n    "),M.TgZ(12,"h2"),M._uU(13),M.ALo(14,"translate"),M.qZA(),M._uU(15,"\n  "),M.qZA(),M._uU(16,"\n  "),M.TgZ(17,"mat-grid-tile"),M._uU(18,"\n    "),M.TgZ(19,"h2"),M._uU(20),M.ALo(21,"translate"),M.qZA(),M._uU(22,"\n  "),M.qZA(),M._uU(23,"\n  "),M._uU(24,"\n  "),M.TgZ(25,"mat-grid-tile"),M._uU(26,"\n    "),M.TgZ(27,"div",4),M._uU(28),M.qZA(),M._uU(29,"\n  "),M.qZA(),M._uU(30,"\n  "),M.TgZ(31,"mat-grid-tile"),M._uU(32,"\n    "),M.TgZ(33,"div",5),M._uU(34,"\n      "),M.TgZ(35,"mat-grid-list",6),M._uU(36,"\n        "),M.TgZ(37,"mat-grid-tile"),M.TgZ(38,"h1"),M._uU(39),M.qZA(),M.qZA(),M._uU(40,"\n        "),M.TgZ(41,"mat-grid-tile"),M.TgZ(42,"h3"),M._uU(43,"1"),M.qZA(),M.qZA(),M._uU(44,"\n        "),M.TgZ(45,"mat-grid-tile"),M.TgZ(46,"h1"),M._uU(47),M.qZA(),M.qZA(),M._uU(48,"\n        "),M.TgZ(49,"mat-grid-tile"),M.TgZ(50,"h1"),M._uU(51),M.qZA(),M.qZA(),M._uU(52,"\n        "),M.TgZ(53,"mat-grid-tile"),M.TgZ(54,"h3"),M._uU(55,"2"),M.qZA(),M.qZA(),M._uU(56,"\n        "),M.TgZ(57,"mat-grid-tile"),M.TgZ(58,"h1"),M._uU(59),M.qZA(),M.qZA(),M._uU(60,"\n        "),M.TgZ(61,"mat-grid-tile"),M.TgZ(62,"h1"),M._uU(63),M.qZA(),M.qZA(),M._uU(64,"\n        "),M.TgZ(65,"mat-grid-tile"),M.TgZ(66,"h3"),M._uU(67,"3"),M.qZA(),M.qZA(),M._uU(68,"\n        "),M.TgZ(69,"mat-grid-tile"),M.TgZ(70,"h1"),M._uU(71),M.qZA(),M.qZA(),M._uU(72,"\n        \n      "),M.qZA(),M._uU(73,"\n    "),M.qZA(),M._uU(74,"\n  "),M.qZA(),M._uU(75,"\n  "),M.TgZ(76,"mat-grid-tile"),M._uU(77,"\n    "),M.TgZ(78,"div",4),M._uU(79),M.qZA(),M._uU(80,"\n  "),M.qZA(),M._uU(81,"\n  "),M._uU(82,"\n  "),M.TgZ(83,"mat-grid-tile"),M._uU(84,"\n    "),M.TgZ(85,"button",7),M.NdJ("click",function(){return M.CHM(n),M.oxw().addPointTeam("1")}),M._uU(86),M.ALo(87,"translate"),M.qZA(),M._uU(88,"\n  "),M.qZA(),M._uU(89,"\n  "),M.TgZ(90,"mat-grid-tile"),M._uU(91,"\n    "),M.TgZ(92,"button",7),M.NdJ("click",function(){return M.CHM(n),M.oxw().subPointTeam()}),M._uU(93),M.ALo(94,"translate"),M.qZA(),M._uU(95,"\n    "),M.TgZ(96,"button",7),M.NdJ("click",function(){return M.CHM(n),M.oxw().stop()}),M._uU(97),M.ALo(98,"translate"),M.qZA(),M._uU(99,"\n  "),M.qZA(),M._uU(100,"\n  "),M.TgZ(101,"mat-grid-tile"),M._uU(102,"\n    "),M.TgZ(103,"button",7),M.NdJ("click",function(){return M.CHM(n),M.oxw().addPointTeam("2")}),M._uU(104),M.ALo(105,"translate"),M.qZA(),M._uU(106,"\n  "),M.qZA(),M._uU(107,"\n"),M.qZA()}if(2&t){var a=M.oxw();M.xp6(6),M.AsE("",M.lcZ(7,29,"pages.scoreboards.score.team1"),": ",a.data[a.field].team1,""),M.xp6(7),M.Oqu(M.lcZ(14,31,"pages.scoreboards.score.sets")),M.xp6(7),M.AsE("",M.lcZ(21,33,"pages.scoreboards.score.team2"),": ",a.data[a.field].team2,""),M.xp6(8),M.Oqu(a.data[a.field].scoreTeam[0]),M.xp6(11),M.Oqu(1==a.data[a.field].set?a.data[a.field].gameTeam[0]:a.data[a.field].setAndGameHistory[0][0]),M.xp6(8),M.Oqu(1==a.data[a.field].set?a.data[a.field].gameTeam[1]:a.data[a.field].setAndGameHistory[0][1]),M.xp6(4),M.Oqu(2==a.data[a.field].set?a.data[a.field].gameTeam[0]:a.data[a.field].setAndGameHistory[1][0]),M.xp6(8),M.Oqu(2==a.data[a.field].set?a.data[a.field].gameTeam[1]:a.data[a.field].setAndGameHistory[1][1]),M.xp6(4),M.Oqu(3==a.data[a.field].set?a.data[a.field].gameTeam[0]:a.data[a.field].setAndGameHistory[2][0]),M.xp6(8),M.Oqu(3==a.data[a.field].set?a.data[a.field].gameTeam[1]:a.data[a.field].setAndGameHistory[2][1]),M.xp6(8),M.Oqu(a.data[a.field].scoreTeam[1]),M.xp6(6),M.ekj("spinner",a.loading),M.Q6J("disabled",a.loading),M.xp6(1),M.hij("",M.lcZ(87,35,"pages.scoreboards.score.up"),"\n    "),M.xp6(6),M.ekj("spinner",a.loading),M.Q6J("disabled",a.loading),M.xp6(1),M.hij("",M.lcZ(94,37,"pages.scoreboards.score.down"),"\n    "),M.xp6(3),M.ekj("spinner",a.loading),M.Q6J("disabled",a.loading),M.xp6(1),M.hij("",M.lcZ(98,39,"pages.scoreboards.score.finish"),"\n    "),M.xp6(6),M.ekj("spinner",a.loading),M.Q6J("disabled",a.loading),M.xp6(1),M.hij("",M.lcZ(105,41,"pages.scoreboards.score.up"),"\n    ")}}var j=function(){function t(t,e){this.ngZone=t,this.service=e,this.data=[],this.loading=!1,this.service.connect(),this.dataService$=this.service.receiveMessage()}return t.prototype.ngOnInit=function(){var t=this,e=this;this.dataService$.subscribe(function(n){e.ngZone.run(function(){n.message==E.r.MESSAGE_STOP?delete e.data[t.field]:t.field==n.match.field&&(e.data[t.field]=n.match)})},function(e){t.loading=!1}),this.service.getMatch(localStorage.getItem("scoreboard-tenant"),this.field).subscribe(function(n){e.ngZone.run(function(){e.data[t.field]=n.match})},function(e){t.loading=!1})},t.prototype.ngOnChanges=function(t){},t.prototype.addPointTeam=function(t){var e=this;this.loading=!0,this.service.addPointTeam(localStorage.getItem("scoreboard-tenant"),this.field,t).subscribe(function(t){e.loading=!1},function(t){e.loading=!1})},t.prototype.subPointTeam=function(){var t=this;this.loading=!0,this.service.subPointTeam(localStorage.getItem("scoreboard-tenant"),this.field).subscribe(function(e){t.loading=!1},function(e){t.loading=!1})},t.prototype.stop=function(){var t=this;this.loading=!0,this.service.stop(localStorage.getItem("scoreboard-tenant"),this.field).subscribe(function(e){t.loading=!1},function(e){t.loading=!1})},t.\u0275fac=function(e){return new(e||t)(M.Y36(M.R0b),M.Y36(P))},t.\u0275cmp=M.Xpm({type:t,selectors:[["app-material-tab-score"]],inputs:{field:"field"},features:[M.TTD],decls:3,vars:2,consts:[["cols","1","rowHeight","100px",4,"ngIf"],["cols","3","rowHeight","100px",4,"ngIf"],["cols","1","rowHeight","100px"],["cols","3","rowHeight","100px"],[1,"score"],[1,"internalMatGrid"],["cols","3","rowHeight","30px"],["mat-raised-button","","type","button","color","primary",3,"disabled","click"]],template:function(t,e){1&t&&(M.YNc(0,H,9,3,"mat-grid-list",0),M._uU(1,"\n\n\n"),M.YNc(2,z,108,43,"mat-grid-list",1)),2&t&&(M.Q6J("ngIf",!e.data||e.data&&!e.data[e.field]),M.xp6(2),M.Q6J("ngIf",e.data&&e.data[e.field]))},directives:[a.O5,f.Il,f.DX,c.lW],pipes:[L.X$],styles:['@keyframes spinner{to{transform:rotate(1turn)}}.spinner[_ngcontent-%COMP%]:before{content:"";box-sizing:border-box;position:absolute;top:50%;left:50%;width:20px;height:20px;margin-top:-10px;margin-left:-10px;border-radius:50%;border:2px solid #fff;border-top-color:#000;animation:spinner .8s linear infinite}.score[_ngcontent-%COMP%]{font-size:6em}.internalMatGrid[_ngcontent-%COMP%]{min-width:80%}']}),t}(),G=function(){function t(){}return t.prototype.ngOnInit=function(){},t.prototype.ngOnChanges=function(t){},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=M.Xpm({type:t,selectors:[["app-material-tabs"]],features:[M.TTD],decls:26,vars:16,consts:[[3,"label"],[3,"field"]],template:function(t,e){1&t&&(M.TgZ(0,"mat-tab-group"),M._uU(1,"\n  "),M.TgZ(2,"mat-tab",0),M.ALo(3,"translate"),M._uU(4,"\n    "),M._UZ(5,"app-material-tab-score",1),M._uU(6,"\n  "),M.qZA(),M._uU(7,"\n  "),M.TgZ(8,"mat-tab",0),M.ALo(9,"translate"),M._uU(10,"\n    "),M._UZ(11,"app-material-tab-score",1),M._uU(12,"\n  "),M.qZA(),M._uU(13,"\n  "),M.TgZ(14,"mat-tab",0),M.ALo(15,"translate"),M._uU(16,"\n    "),M._UZ(17,"app-material-tab-score",1),M._uU(18,"\n  "),M.qZA(),M._uU(19,"\n  "),M.TgZ(20,"mat-tab",0),M.ALo(21,"translate"),M._uU(22,"\n    "),M._UZ(23,"app-material-tab-score",1),M._uU(24,"\n  "),M.qZA(),M._uU(25,"\n"),M.qZA()),2&t&&(M.xp6(2),M.s9C("label",M.lcZ(3,8,"pages.scoreboards_config.field_1")),M.xp6(3),M.Q6J("field","1"),M.xp6(3),M.s9C("label",M.lcZ(9,10,"pages.scoreboards_config.field_2")),M.xp6(3),M.Q6J("field","2"),M.xp6(3),M.s9C("label",M.lcZ(15,12,"pages.scoreboards_config.field_3")),M.xp6(3),M.Q6J("field","3"),M.xp6(3),M.s9C("label",M.lcZ(21,14,"pages.scoreboards_config.field_4")),M.xp6(3),M.Q6J("field","4"))},directives:[g.SP,g.uX,j],pipes:[L.X$],styles:[".material-tabs[_ngcontent-%COMP%]{margin-top:24px;padding:0;overflow:hidden;box-shadow:0 3px 11px 0 #e8eafc,0 3px 3px -2px #b2b2b21a,0 1px 8px 0 #9a9a9a1a}.material-tabs__header[_ngcontent-%COMP%]{color:#6e6e6e;display:flex;justify-content:space-between;padding:24px 24px 8px;margin-bottom:0}.material-tabs__title[_ngcontent-%COMP%]{font-size:21px;font-weight:400;margin:0;line-height:40px}.material-tabs__content[_ngcontent-%COMP%]{overflow-y:hidden;overflow-x:scroll}@media (max-width: 576px){.material-tabs__content[_ngcontent-%COMP%]{height:auto}}.material-tabs__table[_ngcontent-%COMP%]{width:100%}.material-tabs__table-row[_ngcontent-%COMP%]{height:64px}.material-tabs__table-row-title[_ngcontent-%COMP%]{color:#4a4a4a;font-size:14px;font-weight:400;line-height:24px;text-transform:uppercase;padding:16px}.material-tabs__table-content[_ngcontent-%COMP%]{color:#4a4a4a;font-size:14px;padding:20px}.material-tabs__content-badge[_ngcontent-%COMP%]{width:fit-content;border-radius:32px;color:#fff;text-align:center;padding:5px 10px;font-size:13px;box-sizing:border-box;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.75;letter-spacing:.457px}.material-tabs__content-badge[_ngcontent-%COMP%]:first-letter{text-transform:uppercase}mat-menu[_ngcontent-%COMP%]{position:absolute}"]}),t}(),N=n(8178),I=[{path:"",component:function(){function t(t,e){this.service=t,this.ngZone=e}return t.prototype.ngOnInit=function(){},t.\u0275fac=function(e){return new(e||t)(M.Y36(P),M.Y36(M.R0b))},t.\u0275cmp=M.Xpm({type:t,selectors:[["app-scoreboards-page"]],decls:23,vars:3,consts:[["role","heading",1,"page-header"],[1,"scoreboards-wrapper"],[1,"material-table__content"]],template:function(t,e){1&t&&(M.TgZ(0,"app-layout"),M._uU(1,"\n  "),M.TgZ(2,"mat-toolbar",0),M._uU(3,"\n    "),M.TgZ(4,"h1"),M._uU(5),M.ALo(6,"translate"),M.qZA(),M._uU(7,"\n  "),M.qZA(),M._uU(8,"\n  "),M.TgZ(9,"div",1),M._uU(10,"\n    "),M.TgZ(11,"mat-card"),M._uU(12,"\n      "),M.TgZ(13,"mat-card-content",2),M._uU(14,"\n        "),M._UZ(15,"app-material-tabs"),M._uU(16,"\n      "),M.qZA(),M._uU(17,"\n    "),M.qZA(),M._uU(18,"\n  "),M.qZA(),M._uU(19,"\n\n  "),M._UZ(20,"app-footer"),M._uU(21,"\n"),M.qZA(),M._uU(22,"\n")),2&t&&(M.xp6(5),M.Oqu(M.lcZ(6,1,"pages.scoreboards.title")))},directives:[J.$,l.Ye,o.a8,o.dn,G,N.c],pipes:[L.X$],styles:[".scoreboards-wrapper[_ngcontent-%COMP%]{padding:0 8px}.form[_ngcontent-%COMP%]{width:100%}.form__input[_ngcontent-%COMP%]{width:45%;margin:6px}"]}),t}()}],Q=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=M.oAB({type:t}),t.\u0275inj=M.cJS({imports:[[W.Bz.forChild(I)],W.Bz]}),t}(),Y=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=M.oAB({type:t}),t.\u0275inj=M.cJS({providers:[P],imports:[[a.ez,o.QW,i.Ps,r.Tx,s.p0,c.ot,u.p9,l.g0,d.TU,p.lN,g.Nh,f.N6,_.c,b.m,L.aw,Q]]}),t}()}}]);